<!DOCTYPE html>
<html lang="ar">
<head>
<meta charset="UTF-8">

<title>Receipt</title>
<style>
html, body {
    margin: 0;
    padding: 0;
    width: 100%;
}

@page {
    size: 80mm;
    margin: 0;
}

body {
    width: 75mm;
    margin: 0;
    padding: 4px;
    font-family: monospace;
    font-size: 12px;
    line-height: 1.1;      /* tighter */
    color: #000;
}

.wrapper {
    padding: 6px 8px;
}

.center { text-align: center; }
.line { border-top: 1px dashed #000; margin: 4px 0; }

table { width: 100%; border-collapse: collapse; }
td { vertical-align: top; }

.small { font-size: 11px; }

p {
    margin: 2px 0;         /* REMOVE big gaps between paragraphs */
}
</style>


</head>
<body>
<div class="wrapper">

<div class="center">
    <strong>{{ ticket.cashier.full_name }}</strong><br>
    REF: {{ ticket.ref }}
</div>

<div class="line"></div>

<table>
{% for item in ticket.items.all %}
<tr>
    <td>{{ item.product.name }} x {{ item.quantity }}</td>
    <td style="text-align:right">{{ item.subtotal }}</td>
</tr>
{% endfor %}
</table>

<div class="line"></div>

<p>
    الإجمالي: {{ ticket.total_amount }}<br>
    الدفع: {{ ticket.payment_method }}
</p>

<div class="center small">
    شكراً لتعاملكم معنا
</div>

<script>
window.onload = function () {
    window.print();
    setTimeout(() => window.close(), 500);
};
</script>

</div>
</body>

</html>
