{% extends "base.html" %}

{% block title %}ØªÙØ§ØµÙŠÙ„ Ø§Ù„Ø·Ù„Ø¨{% endblock %}

{% block content %}

<h2 class="mb-4">ğŸ§¾ ØªÙØ§ØµÙŠÙ„ Ø§Ù„Ø·Ù„Ø¨ Ø±Ù‚Ù… {{ ticket.id }}</h2>

<div class="mb-3">
    <p><strong>Ø§Ù„ÙƒØ§Ø´ÙŠØ±:</strong> {{ ticket.cashier.full_name|default:ticket.cashier.username }}</p>
    <p>
    <strong>Ø·Ø±ÙŠÙ‚Ø© Ø§Ù„Ø¯ÙØ¹:</strong>
    {% if ticket.payment_method == 'cash' %}
        Ù†Ù‚Ø¯Ø§Ù‹
    {% elif ticket.payment_method == 'transfer' %}
        ØªØ­ÙˆÙŠÙ„
        {% if ticket.transfer_number %}
            <br>
            <br>
            <strong>Ø±Ù‚Ù… Ø§Ù„ØªØ­ÙˆÙŠÙ„:</strong> {{ ticket.transfer_number }}
        {% endif %}
    {% else %}
        ØºÙŠØ± Ù…Ø­Ø¯Ø¯
    {% endif %}
</p>

    <p><strong>Ø§Ù„Ø­Ø§Ù„Ø©:</strong>
        {% if ticket.status == 'closed' %}
            <span class="badge bg-success">Ù…ØºÙ„Ù‚</span>
        {% elif ticket.status == 'refunded' %}
            <span class="badge bg-danger">Ù…ÙØ±Ø¬Ø¹</span>
        {% else %}
            <span class="badge bg-secondary">{{ ticket.status }}</span>
        {% endif %}
    </p>
    <p><strong>Ø§Ù„ØªØ§Ø±ÙŠØ®:</strong> {{ ticket.created_at }}</p>
</div>

<hr>

<h4>ğŸ“¦ Ø§Ù„Ù…Ù†ØªØ¬Ø§Øª</h4>
<br>
<h4 class="text-start">
    ğŸ’° Ø§Ù„Ø¥Ø¬Ù…Ø§Ù„ÙŠ:
    <strong>{{ ticket.total_amount }}</strong>
</h4>

<table class="table table-bordered table-hover align-middle text-center">
    <thead class="table-light">
        <tr>
            <th>Ø§Ù„Ù…Ù†ØªØ¬</th>
            <th>Ø§Ù„ÙƒÙ…ÙŠØ©</th>
            <th>Ø§Ù„Ø³Ø¹Ø±</th>
            <th>Ø§Ù„Ø¥Ø¬Ù…Ø§Ù„ÙŠ</th>
        </tr>
    </thead>

    <tbody>
    {% for item in items %}
        <tr>
            <td>{{ item.product.name }}</td>
            <td>{{ item.quantity }}</td>
            <td>{{ item.price }}</td>
            <td>{{ item.price|floatformat:2 }}</td>
        </tr>
    {% empty %}
        <tr>
            <td colspan="4" class="text-center text-muted">
                Ù„Ø§ ØªÙˆØ¬Ø¯ Ù…Ù†ØªØ¬Ø§Øª
            </td>
        </tr>
    {% endfor %}
    </tbody>
</table>

{% endblock %}
